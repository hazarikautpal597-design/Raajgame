<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AK WIN â€“ Demo ESA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
.box{
  max-width:400px;
  margin:40px auto;
  background:rgba(0,0,0,0.7);
  padding:20px;
  border-radius:12px;
  text-align:center;
}
input,button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border:none;
  border-radius:6px;
}
button{cursor:pointer}
.green{background:#00c853;color:#fff}
.blue{background:#2962ff;color:#fff}
.orange{background:#ff9100;color:#fff}
.red{background:#ff1744;color:#fff}
.hide{display:none}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:10px;
}
</style>
</head>

<body>

<!-- LOGIN / REGISTER -->
<div class="box" id="authBox">
  <h2>AK WIN LOGIN</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button class="green" onclick="login()">Login</button>
  <button class="blue" onclick="register()">Register</button>
</div>

<!-- DASHBOARD -->
<div class="box hide" id="dash">
  <h2>Dashboard</h2>
  <p id="bal">Balance: â‚¹0</p>

  <h3>ðŸŽ¯ WINGO (DEMO)</h3>
  <p>Select Number (0-9)</p>

  <div class="grid">
    <button onclick="bet(0)">0</button>
    <button onclick="bet(1)">1</button>
    <button onclick="bet(2)">2</button>
    <button onclick="bet(3)">3</button>
    <button onclick="bet(4)">4</button>
    <button onclick="bet(5)">5</button>
    <button onclick="bet(6)">6</button>
    <button onclick="bet(7)">7</button>
    <button onclick="bet(8)">8</button>
    <button onclick="bet(9)">9</button>
  </div>

  <button class="red" onclick="logout()">Logout</button>
</div>

<script>
/* ðŸ”¥ FIREBASE CONFIG (YAHAN APNA CONFIG DALO) */
const firebaseConfig = {
  apiKey: "AIzaSyC_D_l61aYw4Q2VpwhgxF52AR7oRlGt5rQ",
authDomain: "appp-257fb.firebaseapp.com",
projectId: "appp-257fb",
storageBucket: "appp-257fb.firebasestorage.app",
messagingSenderId: "486864349890",
appId: "1:486864349890:web:7e091b130c234cb42b295b",
measurementId: "G-EYJGP0644S"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

/* AUTH */
function register(){
  auth.createUserWithEmailAndPassword(email.value,password.value)
  .then(res=>{
    db.ref("users/"+res.user.uid).set({balance:100});
    alert("Registered â€“ â‚¹100 Added");
  })
  .catch(e=>alert(e.message));
}

function login(){
  auth.signInWithEmailAndPassword(email.value,password.value)
  .catch(e=>alert(e.message));
}

function logout(){
  auth.signOut();
}

/* SESSION */
auth.onAuthStateChanged(user=>{
  if(user){
    authBox.classList.add("hide");
    dash.classList.remove("hide");
    loadBalance();
  }else{
    authBox.classList.remove("hide");
    dash.classList.add("hide");
  }
});

/* WALLET */
function loadBalance(){
  let uid=auth.currentUser.uid;
  db.ref("users/"+uid+"/balance").on("value",s=>{
    bal.innerText="Balance: â‚¹"+s.val();
  });
}

/* WINGO DEMO */
function bet(num){
  let uid=auth.currentUser.uid;
  let win=Math.floor(Math.random()*10);
  db.ref("users/"+uid+"/balance").once("value",snap=>{
    let bal=snap.val();
    if(bal<10){alert("Low balance");return;}
    if(num==win){
      bal+=20;
      alert("ðŸŽ‰ WIN! Number "+win);
    }else{
      bal-=10;
      alert("âŒ Lose! Result "+win);
    }
    db.ref("users/"+uid).update({balance:bal});
  });
}
</script>

</body>
</html>